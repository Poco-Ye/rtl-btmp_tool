;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-ia.js' */
(function(a){Confluence.Sidebar={};AJS.toInit(function(g){var s=g(window);var F=g(document);var w=Math.min(285,s.width()/3);var G=285;var E=150;var t=55;var q=AJS.contextPath();var m=q.length?q:"/";var p=AJS.Meta.get("space-key");var c=AJS.Meta.get("use-keyboard-shortcuts")?" "+"(\u2009[\u2009)":"";Confluence.Sidebar.collapseTooltip="Collapse sidebar"+c;Confluence.Sidebar.expandTooltip="Expand sidebar"+c;var f=g(".ia-splitter").children();var H=g(".ia-splitter-left");if(H.length<1){return}var n=g(".acs-side-bar");var y=H.find(".ia-fixed-sidebar");var d=g("<div>",{"class":"ia-splitter-handle tipsy-enabled","data-tooltip":Confluence.Sidebar.collapseTooltip}).appendTo(y);g("<div>",{"class":"ia-splitter-handle-highlight"}).appendTo(d);var h=g(".ia-secondary-container");var A=g("#footer, #studio-footer");Confluence.Sidebar.throbberDiv=i;h.length&&D(h.attr("data-tree-type"));s.scroll(x);s.resize(x);s.on("touchend",x);F.ready(x);AJS.bind("confluence.header-resized",x);g("#header-precursor img").load(x);Confluence.Sidebar.applyTooltip=u;l();AJS.bind("sidebar.exit-configure-mode",l);var j=g.cookie("confluence-sidebar.width")||w,e=j>E?j:t;k(e);v();y.css("visibility","visible");x();o();Confluence.Sidebar.createFlyouts(n);AJS.trigger("sidebar.finished-loading");s.one("pagetree-children-loaded",function(){var J=g(".plugin_pagetree_current");if(J.length){var K=J.offset();if(K.top>n.height()/2){n.scrollTop(K.top-n.height()/3)}if(K.left>n.width()/2){n.scrollLeft(K.left-n.width()/2)}}});AJS.bind("sidebar.enter-configure-mode",function(){b();I();y.addClass("configure-mode")});AJS.bind("sidebar.exit-configure-mode",function(){b();z();y.removeClass("configure-mode")});function b(){AJS.trigger("sidebar.hide-overlays")}function u(J,L){var K={live:true,gravity:"w",title:"data-tooltip",delayIn:500,delayOut:0,offset:5};g(J).tooltip(L?g.extend(K,L):K)}function l(){g(".acs-side-bar .quick-links-section").attr("data-collapsed-tooltip","Space shortcuts");g("#space-tools-menu-trigger").attr("data-collapsed-tooltip","Space tools");if(h.attr("data-tree-type")=="pages"){g(".acs-side-bar .ia-secondary-container").attr("data-collapsed-tooltip","Child pages");u(".collapsed .ia-secondary-container.tipsy-enabled",{title:"data-collapsed-tooltip"})}u(".expand-collapse-trigger");u(".ia-splitter-handle.tipsy-enabled");u(".collapsed .quick-links-section.tipsy-enabled, .collapsed .acs-nav-item > a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled",{title:"data-collapsed-tooltip"});u(".configure-mode .acs-side-bar-space-info.tipsy-enabled",{title:"data-configure-tooltip"});n.on("mousedown click scroll",b);g(window).on("scroll resize",b);AJS.bind("sidebar.hide-overlays",K);AJS.bind("sidebar.disable-tooltip",L);AJS.bind("sidebar.enable-all-tooltips",J);function L(P,O){var M=g(O).closest(".tipsy-enabled");if(M.size()!=1){return}M.removeClass("tipsy-enabled").addClass("tipsy-disabled").attr("title","");var N=M.data("tipsy");if(N){N.hoverState="out"}K()}function J(){g(".tipsy-disabled").removeClass("tipsy-disabled").addClass("tipsy-enabled")}function K(){g(".tipsy").remove()}}function v(){F.on("mousewheel",".ia-scrollable-section",function(M,N){var L=g(this).scrollTop();var K=g(this).get(0).scrollHeight-g(this).innerHeight()-1;if((N>0&&L<=0)||(N<0&&L>=K)){M.preventDefault()}else{if(g.browser.msie){M.preventDefault();var J=30;g(this).scrollTop(L+(-1*N*J))}}M.stopPropagation()})}function i(){var K=g(Confluence.Templates.Sidebar.throbber()),L=K.find(".spinner"),J=Raphael.spinner(L[0],10,"#666");K.find(".throbber").bind("remove",function(){J()});return K}function D(J){if(J==="blogs"){C(n,r)}else{if(J==="pages"){Confluence.Sidebar.Pages.installHandlers(n)}}}function r(M,N){var L=M.attr("data-group-type");var J=M.attr("data-group-value");var K=q+"/rest/ia/1.0/pagetree/blog/subtree";g.get(K,{spaceKey:p,groupType:L,groupValue:J}).done(N)}function C(J,K){J.delegate(".acs-tree-item > .icon, .acs-tree-item > .node-title","click",function(){var P=g(this);var O=P.parent();var L=O.find("> .icon");if(O.hasClass("opened")){O.children("ul").hide();O.removeClass("opened").addClass("closed");L.removeClass("icon-section-opened").addClass("icon-section-closed")}else{if(O.hasClass("closed")){var M=O.children("ul");if(M.length){M.show()}else{var N=g(Confluence.Templates.Sidebar.treeThrobber());O.append(N);K(O,function(R){var Q=g(Confluence.Templates.Sidebar.pagetreeList({pagetree:R,isSubtree:true}));N.remove();Q.appendTo(O)})}O.removeClass("closed").addClass("opened");L.removeClass("icon-section-closed").addClass("icon-section-opened")}}})}function x(){var J=H.offset().top,K=s.scrollTop(),L=s.scrollLeft();if(K<0){return}if(K>(F.height()-s.height())){return}if(L<0){return}if(L>(F.width()-s.width())){return}y.css({top:Math.max(J-K,0)+"px",left:Math.min(L*-1,0)+"px"})}function B(){A.css("margin-left",y.outerWidth()+"px")}function o(){var M=g("body");var K=false;var L=false;var N=function(O){L=true;O.preventDefault();f.one("selectstart",function(Q){Q.preventDefault()});var P=function(){if(y.width()<=E){k(t)}else{w=y.width()}L=false;M.off("mousemove.ia-splitter")};K=false;M.on("mousemove.ia-splitter",function(Q){if(Confluence.Sidebar.Configure.mode&&Q.pageX<G){return}k(Q.pageX);K=true});M.one("mouseup mouseleave",P)};d.on("mousedown.ia-splitter",function(O){N(O);b()}).click(function(){if(!K){J()}else{K=false}});Confluence.Sidebar.toggle=J;function J(){if(Confluence.Sidebar.Configure.mode){return}var O=y.width();if(O>t){if(O<=E){w=G;k(w)}else{w=O;k(t)}}else{k(w)}}}function k(J){J=Math.max(J,t);g.cookie("confluence-sidebar.width",J,{path:m,expires:365});if(J<=E){y.addClass("collapsed");d.attr("data-tooltip",Confluence.Sidebar.expandTooltip);AJS.trigger("sidebar.collapsed")}else{if(y.hasClass("collapsed")){y.removeClass("collapsed");d.attr("data-tooltip",Confluence.Sidebar.collapseTooltip);AJS.trigger("sidebar.expanded")}}y.width(J);f.eq(1).css("margin-left",J+"px");B()}function I(){if(y.width()<G){Confluence.Sidebar.widthBeforeConfiguring=y.width();k(G)}}function z(){if(Confluence.Sidebar.widthBeforeConfiguring){k(Confluence.Sidebar.widthBeforeConfiguring);Confluence.Sidebar.widthBeforeConfiguring=undefined}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/configurable-nav.js' */
(function(a){AJS.Confluence.ConfigurableNav=AJS.RestfulTable.extend({initialize:function(c){var b=this;b.options=a.extend(true,c,{model:AJS.RestfulTable.EntryModel,Collection:Backbone.Collection.extend({url:c.resources.self,model:AJS.RestfulTable.EntryModel}),columns:[{id:"title"}]});b._events=b._events||AJS.RestfulTable.Events;b._event=b._event||AJS.RestfulTable.Events;b.classNames=AJS.RestfulTable.ClassNames;b.dataKeys=AJS.RestfulTable.DataKeys;b.$table=c.$el.addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);b.$table.prepend('<colgroup><col span="1" class="aui-restfultable-order"><col span="1"><col span="1" class="aui-restfultable-operations"></colgroup>');b.$tbody=a("<tbody/>");b._models=this._createCollection();b._rowClass=AJS.Confluence.ConfigurableNav.Row;b.editRows=[];b.enableReordering();b._models.bind("remove",function(d){a.each(b.getRows(),function(e,f){if(f.model===d){if(f.hasFocus()&&b._createRow){b._createRow.trigger(b._event.FOCUS)}b.removeRow(f)}})});a.get(b.options.resources.all,function(d){b.populate(d)});Confluence.Sidebar.applyTooltip(".hide-link, .show-link, .delete-link, .toggle-link",{gravity:"ne"})},enableReordering:function(){var b=this;this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(f,c){var d=c.clone(true).addClass(b.classNames.MOVEABLE);d.children().each(function(e){a(this).width(c.children().eq(e).width())});return d},start:function(c,d){var e=d.placeholder.find("td");d.item.addClass(b.classNames.MOVEABLE).children().each(function(f){a(this).width(e.eq(f).width())});d.placeholder.html('<td colspan="'+b.getColumnCount()+'">&nbsp;</td>').css("visibility","visible");b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(c,d){if(jQuery(d.item[0]).is(":visible")){d.item.removeClass(b.classNames.MOVEABLE).children().attr("style","");d.placeholder.removeClass(b.classNames.ROW);b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)}},update:function(e,g){var c,d,f={},h=b.getRowFromElement(g.item[0]);if(h){if(b.options.reverseOrder){d=g.item.next();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}else{d=g.item.prev();if(!d.length){f.position="First"}else{c=b.getRowFromElement(d).model;f.after=c.url()}}f.spaceKey=AJS.Meta.get("space-key");a.ajax({url:h.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(f),complete:function(){h.hideLoading()},success:function(i){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[i])},error:function(j){var i=a.parseJSON(j.responseText||j.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[i,j])}});h.showLoading()}},axis:"y",delay:0,containment:"document",cursor:"move",scroll:true,zIndex:8000});this.$tbody.bind("selectstart mousedown",function(c){return !a(c.target).is("."+b.classNames.DRAG_HANDLE)})}});AJS.Confluence.ConfigurableNav.ReadView=AJS.RestfulTable.CustomReadView.extend({render:function(b){return _.template('<span class="acs-nav-item-link" title="<%=title%>"><span class="icon"></span><span class="acs-nav-item-label"><%=title%></span></span>',{title:AJS.escapeHtml(b.title)})}});AJS.Confluence.ConfigurableNav.Row=AJS.RestfulTable.Row.extend({render:function(){var b=this,d=this.model.toJSON(),e=a("<td class='aui-restfultable-operations' />").append(this.renderOperations(d.canHide,d.hidden)),c=a('<td class="'+this.classNames.ORDER+'"/>').append(this.renderDragHandle());b._event=b._event||b._events;b.$el.attr("data-id",this.model.id);b.$el.append(c);a.each(b.columns,function(f,g){var h,k=a("<td />"),j=d[g.id];if(j){b.$el.attr("data-"+g.id,j)}h=new AJS.Confluence.ConfigurableNav.ReadView().render(d);k.append(h);b.$el.append(k)});b.$el.append(e);d.canHide&&d.hidden&&b.$el.addClass("hidden-link");b.$el.addClass(this.classNames.ROW+" "+b.classNames.READ_ONLY+" acs-nav-item "+d.styleClass);b.trigger(this._event.RENDER,this.$el,d);b.$el.trigger(this._event.CONTENT_REFRESHED,[b.$el]);return b},renderOperations:function(f,e){var c=this,b=a('<a href="#" class="aui-icon aui-icon-small"/>');if(f){function d(g){if(g.hasClass("hide-link")){g.attr("data-tooltip","Hide link")}else{g.attr("data-tooltip","Show link")}}b.addClass(e?"show-link":"hide-link").click(function(g){g.preventDefault();a.ajax({url:c.model.url()+(e?"/show":"/hide"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key")})}).done(function(){b.closest(".acs-nav-item").toggleClass("hidden-link");b.toggleClass("hide-link").toggleClass("show-link");d(b)})});d(b)}else{b.addClass("delete-link tipsy-enabled").click(function(g){g.preventDefault();if(a(".acs-nav").data("quick-links-state")!="hide"){AJS.trigger("sidebar.disable-tooltip",this);c.destroy()}}).attr("data-tooltip","Remove link")}return b},destroy:function(){this.model.destroy({data:{spaceKey:AJS.Meta.get("space-key")}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-pages.js' */
(function(b){var a=AJS.Meta.get("context-path");Confluence.Sidebar.Pages={installHandlers:function(d){d.find(".more-children-link").click(function(f){f.preventDefault();d.find("ul.more-children").show();b(this).hide()})},quickLinksContent:function(){return new b.Deferred().resolve(b(".acs-side-bar .quick-links-wrapper").html())},childPageCollapsedContent:function(){var e=b(".acs-side-bar .ia-secondary-header");var d=b(".acs-side-bar .ia-secondary-parent-content");var g=b(".acs-side-bar .ia-secondary-current-content");var f=b(".acs-side-bar .ia-secondary-content");return new b.Deferred().resolve(b("<div>").append(b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(e.clone()).append(d.clone()).append(g.clone()).append(f.clone())).html())},pageTreeCollapsedContent:function(){var d=b(".page-tree-flyout-content");if(d.length==0){return c().pipe(function(e){var f=b("<div>").addClass("acs-side-bar-flyout-wiki-wrapper").append(Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav:e,hasCreatePermission:b(".acs-nav").data("has-create-permission")}));b("body").append(b("<div>").addClass("page-tree-flyout-content hidden").append(f.clone()));return f})}else{return new b.Deferred().resolve(d.html())}}};function c(){return b.ajax({url:a+"/rest/ia/1.0/space/childPagesContextualNav",data:{pageId:AJS.Meta.get("page-id")}})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-links.js' */
AJS.$(function(){Confluence.Sidebar.Configure={mode:false};var b=AJS.$,m=AJS.Meta.get("context-path"),k=AJS.Meta.get("space-key"),i=b(".acs-side-bar"),q=i.find(".ia-secondary-container"),u=i.find(".project-shortcut-dialog-trigger"),c,o,j,l,g=b(".acs-nav");b.ajaxSetup({cache:false});b("body").on("click","#acs-configure-link, a.configure-sidebar",function(v){v.preventDefault();t()});function t(){AJS.trigger("sidebar-before-enter-configure-mode");l=g.data("nav-type");Confluence.Sidebar.Configure.mode=true;j=b(".acs-nav-sections .acs-nav-item.current-item").data("collector-key");c=Confluence.Sidebar.throbberDiv();c.height(b(".acs-nav-sections").height());b(".acs-nav-sections").replaceWith(c);q.hide();o=b(Confluence.Templates.Sidebar.configure({pageTree:l==="page-tree",quickLinksState:g.data("quick-links-state")})).hide();c.after(o);d(false);h();f();r();var w={};var v=function(){c.replaceWith(o);o.show()};b("#acs-nav-list-main").one(AJS.RestfulTable.Events.INITIALIZED,function(){w.main=true;w.quick&&v()});b("#acs-nav-list-quick").one(AJS.RestfulTable.Events.INITIALIZED,function(){w.quick=true;w.main&&v()});b(".acs-nav-type").change(function(x){s("nav-type",b(this).val(),function(y){q.data("tree-type",y);g.data("nav-type",y)})});b(".acs-done-link").click(function(x){x.preventDefault();b(".acs-done-link").attr("aria-disabled",true).prop("disabled",true);n()});b(".quick-links-header a").click(function(y){y.preventDefault();var x=g.data("quick-links-state")=="hide"?"show":"hide";s("quick-links-state",x,a)});AJS.$(".acs-side-bar-space-info").on("click.configurelogo",p);AJS.trigger("sidebar.enter-configure-mode")}function p(x){var w=AJS.$(".acs-side-bar-space-info > .flyout-handle");w.addClass("loading").spin();var v=WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:avatar-picker",function(){AJS.trigger("deferred.spaceia.open.configure.space")});v.always(function(){w.removeClass("loading").spinStop()});x.preventDefault()}function s(v,w,x){b.ajax({url:m+"/rest/ia/1.0/space/option",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:k,option:v,value:w}),success:function(y){x(w)}})}function n(){if(l!==g.data("nav-type")){location.reload();return}c=Confluence.Sidebar.throbberDiv();c.height(o.height());o.replaceWith(c);d(true);e();q.show().css("display","");var v=function(){var x=b(Confluence.Templates.Sidebar.renderLinks({mainLinks:w.main,quickLinks:w.quick.reverse(),advancedLinks:w.advanced,hasConfigurePermission:true,collectorToHighlight:j,quickLinksState:g.data("quick-links-state")}));c.replaceWith(x);Confluence.Sidebar.Configure.mode=false;AJS.trigger("sidebar.exit-configure-mode")};var w={};b.get(m+"/rest/ia/1.0/link/main",{spaceKey:k,includeHidden:false}).done(function(x){w.main=x;w.quick&&w.advanced&&v()});b.get(m+"/rest/ia/1.0/link/quick",{spaceKey:k}).done(function(x){w.quick=x;w.main&&w.advanced&&v()});b.get(m+"/rest/ia/1.0/link/advanced",{spaceKey:k}).done(function(x){w.advanced=x;w.main&&w.quick&&v()});Confluence.Sidebar.Configure.Logo&&Confluence.Sidebar.Configure.Logo.unbind()}function h(){var v=new b.Deferred();b(".acs-add-link").click(function(w){v.done(function(){w.preventDefault();if(g.data("quick-links-state")!=="hide"){Confluence.Sidebar.LinkAdapter.hijackLinkBrowser();Confluence.Editor.LinkBrowser.open();b("#recentlyviewed-panel-id").click()}})});if(AJS.Meta.get("space-key")){AJS.Confluence.EditorLoader.load(function(){v.resolve()},function(){AJS.log("Attempted to load editor for space ia side bar. Loading the editor failed.");v.reject()})}else{v.resolve()}}function f(){var v=b("#acs-nav-list-quick");var x=b(".acs-nav-sections .tip").hide();var w=function(){if(Confluence.Sidebar.Configure.QuickLinks.isEmpty()){v.hide();x.show()}else{x.hide();v.show()}};AJS.bindEvt(AJS.RestfulTable.Events.INITIALIZED,w);AJS.bindEvt(AJS.RestfulTable.Events.ROW_ADDED,w);AJS.bindEvt(AJS.RestfulTable.Events.ROW_REMOVED,w)}function r(){Confluence.Sidebar.Configure.MainLinks=new AJS.Confluence.ConfigurableNav({$el:b("#acs-nav-list-main"),resources:{all:m+"/rest/ia/1.0/link/main?spaceKey="+k+"&includeHidden=true",self:m+"/rest/ia/1.0/link"}});Confluence.Sidebar.Configure.QuickLinks=new AJS.Confluence.ConfigurableNav({$el:b("#acs-nav-list-quick"),resources:{all:m+"/rest/ia/1.0/link/quick?spaceKey="+k,self:m+"/rest/ia/1.0/link"},reverseOrder:true})}function e(){Confluence.Sidebar.Configure.MainLinks.remove();Confluence.Sidebar.Configure.MainLinks.unbind();Confluence.Sidebar.Configure.QuickLinks.remove();Confluence.Sidebar.Configure.QuickLinks.unbind();b(AJS).unbind(AJS.RestfulTable.Events.INITIALIZED);b(AJS).unbind(AJS.RestfulTable.Events.ROW_ADDED);b(AJS).unbind(AJS.RestfulTable.Events.ROW_REMOVED)}function d(v){u.length&&u.toggleClass("project-shortcut-dialog-trigger",v)}function a(v){g.data("quick-links-state",v);if(v==="hide"){b(".acs-nav-list-quick-section").addClass("hidden-section")}else{b(".acs-nav-list-quick-section").removeClass("hidden-section")}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools.js' */
AJS.toInit(function(f){var a=[];var d=[];var e;var h;var b;var g=f.browser.msie&&parseInt(f.browser.version,10)<=8;f("#space-tools-web-items div").each(function(){a.push({label:f(this).data("label"),href:f(this).data("href")})});f("#space-tools-menu-additional-items div").each(function(){d.push({className:f(this).data("class"),label:f(this).data("label"),href:f(this).data("href")})});h={hideDelay:null,width:170,displayShadow:false,calculatePositions:function(i,j){var k=j.target.offset();return{popupCss:{top:k.top-i.height(),left:k.left},arrowCss:{display:"none"}}},hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}};e=AJS.InlineDialog(f("#space-tools-menu-trigger"),"space-tools",function(j,i,k){j.html(Confluence.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:a,spaceLinks:d}));f(i).one("click",function(l){if(f("#inline-dialog-space-tools").is(":visible")){setTimeout(function(){e.hide()},0)}});AJS.trigger("sidebar.disable-tooltip",i);AJS.trigger("sidebar.spacetools-loaded");k();return false},h);e.addClass("aui-dropdown2 aui-style-default");AJS.bind("sidebar.hide-overlays",e.hide);b=f(".expand-collapse-trigger");b.click(function(i){i.preventDefault();Confluence.Sidebar.toggle()});b.attr("data-tooltip",f(".ia-fixed-sidebar").hasClass("collapsed")?Confluence.Sidebar.expandTooltip:Confluence.Sidebar.collapseTooltip);AJS.bind("sidebar.collapsed",function(){b.attr("data-tooltip",Confluence.Sidebar.expandTooltip);c()});AJS.bind("sidebar.expanded",function(){b.attr("data-tooltip",Confluence.Sidebar.collapseTooltip);c()});c();function c(){if(g){f("#space-tools-menu-trigger").toggleClass("force-redraw")}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-flyouts.js' */
(function(d){var b,c,a;Confluence.Sidebar.createFlyouts=function(h){b=g(d(".collapsed .quick-links-section"),Confluence.Sidebar.Pages.quickLinksContent,"sidebar-quick-links-flyout",{flyout:"quick-links"});var i=h.find(".ia-secondary-container");if(i.length&&i.attr("data-tree-type")=="pages"){c=g(d(".collapsed .ia-secondary-header-title.wiki"),Confluence.Sidebar.Pages.childPageCollapsedContent,"sidebar-children-flyout",{flyout:"children"})}if(i.length&&i.attr("data-tree-type")=="page-tree"){a=g(d(".collapsed .ia-secondary-header-title.page-tree"),Confluence.Sidebar.Pages.pageTreeCollapsedContent,"sidebar-page-tree-flyout",{flyout:"pagetree"})}};function g(h,k,j,m){var l=function(o,n,p){d(o).addClass("acs-side-bar-flyout ia-scrollable-section");d(o).empty().append(Confluence.Sidebar.throbberDiv());k().done(function(q){d(o).html(q)});AJS.trigger("sidebar.flyout-triggered",m);p();d(n).one("click",function(q){if(d("#inline-dialog-"+j).is(":visible")){setTimeout(function(){i.hide()},0)}});AJS.trigger("sidebar.disable-tooltip",n)};var i=AJS.InlineDialog(h,j,l,{getArrowPath:e,calculatePositions:f,useLiveEvents:true,hideDelay:null,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}});AJS.bind("sidebar.hide-overlays",i.hide);return i}function f(i,l,q,h){var r=l.target.offset();var p=l.target.width();var m=l.target.height();var o={top:r.top+m/2-15,left:r.left+p+5,right:"auto"};var j=d(window);var n=20;o.maxHeight=j.height()+j.scrollTop()-o.top-n;if(d.browser.msie&&parseInt(d.browser.version,10)<=8){o.maxHeight-=40}var k={top:9,left:-7};return{displayAbove:false,popupCss:o,arrowCss:k}}function e(){return"M8,16 L0,8,8,0"}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/external/jquery.mousewheel.min.js' */
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/link-browser-adapter.js' */
(function(a){Confluence.Sidebar.LinkAdapter={setLink:function(d){var c=AJS.Meta.get("context-path");var e=Confluence.unescapeEntities(d.getHtml());var b={spaceKey:AJS.Meta.get("space-key"),resourceId:d.attrs["data-linked-resource-id"],resourceType:d.attrs["data-linked-resource-type"],customTitle:e==d.getDefaultAlias()?"":e,url:d.attrs.href};a.ajax({type:"POST",url:c+"/rest/ia/1.0/link",data:a.toJSON(b),dataType:"json",contentType:"application/json",success:function(f){AJS.Confluence.Sidebar.Configure.QuickLinks.addRow({id:f.id,title:f.title,styleClass:f.styleClass,canHide:f.canHide,hidden:f.hidden})}})},getLink:function(){return Confluence.Link.fromData({attrs:{},body:{isEditable:true,isImage:false,html:"",imgName:"",text:""}})},hijackedLinkBrowser:false,hijackLinkBrowser:function(){var b=Confluence.Sidebar.LinkAdapter;if(!b.hijackedLinkBrowser){b.storeBookmark=AJS.Rte.BookmarkManager.storeBookmark;b.restoreBookmark=AJS.Rte.BookmarkManager.restoreBookmark;AJS.Rte.BookmarkManager.storeBookmark=a.noop;AJS.Rte.BookmarkManager.restoreBookmark=a.noop;b.oldLinkAdapter=Confluence.Editor.LinkAdapter;Confluence.Editor.LinkAdapter=b;b.$oldTabItems=a("#link-browser-tab-items div");b.$oldTabItems.each(function(){AJS.debug("while iterating over tab items: "+a(this));var c=a(this).text();if(c!="search"&&c!="recentlyviewed"&&c!="weblink"){a(this).remove()}});b.hijackedLinkBrowser=true}},releaseLinkBrowser:function(){var b=Confluence.Sidebar.LinkAdapter;if(b.hijackedLinkBrowser){AJS.Rte.BookmarkManager.storeBookmark=b.storeBookmark;AJS.Rte.BookmarkManager.restoreBookmark=b.restoreBookmark;a("#link-browser-tab-items").empty().append(b.$oldTabItems);Confluence.Editor.LinkAdapter=b.oldLinkAdapter;b.hijackedLinkBrowser=false}}};AJS.bind("closed.link-browser",function(){if(Confluence.Sidebar.LinkAdapter.hijackedLinkBrowser){Confluence.Sidebar.LinkAdapter.releaseLinkBrowser()}});AJS.bind("updated.link-browser-recently-viewed",function(){var c=AJS.Meta.get("page-title"),b=AJS.Meta.get("space-name");if(c&&b){a("#insert-link-dialog .recently-viewed-panel .data-table tr").each(function(){var d=a(this);if(d.find(".title-field").text()==c&&d.find(".space-field").text()==b){d.click()}})}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-logo.js' */
require(["jquery","confluence-space-ia/avatar-picker/avatar-picker-dialog","confluence-space-ia/avatar-picker/fd-slider"],function(b,c,a){b(function(){Confluence.Sidebar.Configure.Logo={};var d=b(".acs-side-bar-space-info div.name a");var i;var g=function(j){b(".space-logo .avatar-img").attr("src",AJS.Meta.get("context-path")+j)};var f=function(j){d.attr("title",j).text(j)};var h=function(){if(!i){i=new c({onCrop:function(k,j){b.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key"),spaceName:j,logoDataURI:k}),url:AJS.Meta.get("context-path")+"/rest/ia/1.0/space/setLogo",success:function(l){g(l.logoDownloadPath);f(l.name);i.hide()},error:function(l){i.setMessage("An error occurred while updating space details");i._removeSaveImageLoadingIcon()}})}});a.onDomReady()}i.show(b(".acs-side-bar-space-info div.name a").text());e.preventDefault();return false};AJS.bind("sidebar-before-enter-configure-mode",function(){AJS.bind("deferred.spaceia.open.configure.space",function(j){h();j.preventDefault();return false})});Confluence.Sidebar.Configure.Logo.unbind=function(){b("#inline-dialog-space-logo-config .cancel").click();b(".acs-side-bar-space-info").off("click.configurelogo");AJS.unbind("deferred.spaceia.open.configure.space")}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
